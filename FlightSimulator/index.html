<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="output.css">
    <link rel="stylesheet" href="noUiSlider.css">
    <style>
    @font-face {
        font-family: 'Marart Sans Bold';
        src: url('./marat-sans/Marat Sans Bold.otf') format("opentype");
    }
    .MarartSansBoldFont{
        font-family: 'Marart Sans Bold', sans-serif;
    }
    #update{
        opacity: 1;
        transition: opacity 0.3s; 
    }
    #update:disabled {
        opacity: 0.1;
    }
    #plane-selector > button:disabled{
        border-color: rgb(74 222 128)
    }

    </style>
  </head>

  <body>
    <div class="w-full flex flex-col items-center">
        <div style="width: 700px;" class="pt-4 flex flex-col h-screen">
            <p class="MarartSansBoldFont text-6xl pb-2">Flight Simulator</p>
            <div 
                id="progress-status-container"
                class="pb-1"
            >
                <div 
                    class="MarartSansBoldFont font-thin rounded-lg h-16 w-full "
                >
                    Please wait while the game downloads
                    <div class="border border-black rounded-lg h-8 my-2 mx-1 relative">
                        <div
                            id="progress-bar"
                            class="absolute top-0 left-0 h-full bg-green-500 rounded-lg flex items-center justify-center"
                        ></div>
                    </div>
                </div>
            </div>
            <canvas style="height: 394px;" id="canvas"></canvas>
            <button id="fullscreen" class="place-self-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 mt-4 border border-blue-700 rounded">
                Fullscreen
            </button>
        </div>
        <div style="width: 700px;" class=" flex flex-col min-h-screen ">
            <div class="h-1/2 flex flex-col">
                <p class="MarartSansBoldFont text-4xl pt-4">Terrain Parameter</p>

                <div>

                    <div class="w-full mt-4 pl-4 items-center">
                        <span class=" flex">
                            <p>Active Wave Numbers</p>
                            <p id="active-wave-numbers-values"></p>
                        </span>
                        <div id="active-wave-numbers-input-container" class="mt-1flex justify-around pr-2">
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox" checked/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                            <input type="checkbox"/>
                        </div>
                    </div>

                    <div class="w-full flex mt-4 pl-4 items-center">
                        <span class="w-2/5 flex">
                            <p>Rotation Angle</p>
                            <p id="rotation-angle-value"></p>
                        </span>
                        <div class="w-3/5" id="rotation-slider"></div>
                    </div>

                    <div class="w-full flex mt-4 pl-4 items-center">
                        <span class="w-2/5 flex">
                            <p>Output scale factor</p>
                            <p id="output-increase-fctr-value"></p>
                        </span>
                        <div class="w-3/5" id="output-increase-fctr-slider"></div>
                    </div>

                    <div class="w-full flex mt-4 pl-4 items-center">
                        <span class="w-2/5 flex">
                            <p>Input shrink factor</p>
                            <p id="input-shrink-fctr-value"></p>
                        </span>
                        <div class="w-3/5" id="input-shrink-fctr-slider"></div>
                    </div>

                    <div class="w-full flex mt-4 pl-4 items-center">
                        <span class="w-2/5 flex">
                            <p>Lacunarity</p>
                            <p id="lacunarity-value"></p>
                        </span>
                        <div class="w-3/5" id="lacunarity-slider"></div>
                    </div>

                    <div class="w-full flex mt-4 pl-4 items-center">
                        <span class="w-2/5 flex">
                            <p>Persistance</p>
                            <p id="persistance-value"></p>
                        </span>
                        <div class="w-3/5" id="persistance-slider"></div>
                    </div>
                </div>

                <button 
                    id="update" 
                    class="place-self-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 mt-4 border border-blue-700 rounded" 
                    disabled
                >
                    Update
                </button>
            </div>

            <div class="h-1/2 flex flex-col">
                <p class="MarartSansBoldFont text-4xl pt-4">Plane</p>
                <div class="flex justify-around mt-4" id="plane-selector">
                    <button class="h-32 w-32 border-2 border-slate-800 rounded-lg flex items-center justify-center text-5xl" disabled>1</button>
                    <button class="h-32 w-32 border-2 border-slate-800 rounded-lg flex items-center justify-center text-5xl" >2</button>
                    <button class="h-32 w-32 border-2 border-slate-800 rounded-lg flex items-center justify-center text-5xl" >3</button>
                </div>
            </div>

            <a class="place-self-center mt-16" style="color: #0000EE;" href="https://github.com/professorcode1/Computer-Graphics-Project" >Source Code</a>
        </div>

    </div>
    <div>
    </div>
    <script defer type="text/javascript">
      var canvas = document.getElementById("canvas");
      function updateProgressBar(status_log){
        console.log("progress status", status_log)
        const [num, den] = status_log.split(
            '...'
        )[1].replace(
            '(', ''
        ).replace(
            ')',''
        ).trim().split(
            '/'
        ).map(x => parseInt(x));
        if(isNaN(num)) return;
        const new_width = `${((num*100)/den).toFixed(2)}%`;
        const progress_bar = document.getElementById("progress-bar");
        progress_bar.style.width = new_width;
        progress_bar.innerHTML = new_width;
      }
      function removeProgressBar(){
        const ele = document.getElementById("progress-status-container");
        ele.parentElement.removeChild(ele);
      }
      var Module = {
        canvas,
        setStatus:updateProgressBar,
        preRun:[()=>console.log("pre run called me")],
        postRun:[removeProgressBar]
      };
      document.getElementById("fullscreen").addEventListener(
        "click",
        function () {
          if (canvas.requestFullscreen) {
            canvas.requestFullscreen();
          } else if (canvas.webkitRequestFullscreen) {
            /* Safari */
            canvas.webkitRequestFullscreen();
          } else if (canvas.msRequestFullscreen) {
            /* IE11 */
            canvas.msRequestFullscreen();
          }
        },
        false
      );

    </script>
    <script defer src="index.js"></script>
     <script defer src="noUiSlider.js"></script>
    <script defer src="custom.js" ></script>
  </body>
</html>